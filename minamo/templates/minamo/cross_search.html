{% extends 'minamo/base.html' %}

{% block title %}{{ book.title }} - 検索 "{{ query }}"{% endblock %}

{% block content %}
<ol class="breadcrumb">
  <li class="breadcrumb-item"><a href="{% url 'minamo:index' %}">ホーム</a></li>
  <li class="breadcrumb-item"><a href="{% url 'minamo:book_detail' book.id %}">{{ book.title }}</a></li>
  <li class="breadcrumb-item active">検索 "{{ query }}"</li>
</ol>

<div class="container text-left">
    {% if matches|length == 100 %}
    <div class="alert alert-warning" role="alert">
        最初の100件のみ表示しています。
    </div>
    {% endif %}
    {% for match in matches %}
    <div class="card border-0 mb-3">
        <div class="row">
            <div class="col-md-4">
                <a href="{% url 'minamo:edit_section' book.id match.chapter_id match.section_id %}?index={{ match.index }}&querylen={{ query|length }}" class="item-subtitle">{{ match.chapter_title }}/{{ match.section_title }}</a>
            </div>
            <div class="col-md-8 text-end">
                <p class="item-text text-truncate">{{ match.preview }}</p>
            </div>
        </div>
    </div>
    {% empty %}
    <div class="alert alert-light" role="alert">
        見つかりませんでした。
    </div>
    {% endfor %}
</div>
<div class="mb-3">
    <a href="{% url 'minamo:book_detail' book.id %}" class="btn btn-secondary">本に戻る</a>
</div>
{% endblock %}